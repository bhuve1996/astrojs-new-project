---
// Reusable scroll section component with snap behavior
interface Props {
  id?: string;
  backgroundImage?: string;
  backgroundColor?: string;
  stickyBackground?: boolean;
  children?: unknown;
}

const {
  id = '',
  backgroundImage = '',
  backgroundColor = '#13151a',
  stickyBackground = false,
} = Astro.props;
---

<section
  class={`scroll-section ${stickyBackground ? 'sticky-bg' : ''}`}
  id={id}
  style={`
    background-color: ${backgroundColor};
    ${backgroundImage ? `background-image: url(${backgroundImage});` : ''}
  `}
>
  <div class="section-content">
    <slot />
  </div>
</section>

<style>
  .scroll-section {
    min-height: 100vh;
    height: 100vh;
    width: 100%;
    position: relative;
    z-index: 1;
    scroll-snap-align: start;
    scroll-snap-stop: normal;
    scroll-margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    overflow: hidden;
    flex-shrink: 0;
    margin: 0;
    padding: 0;
  }

  .scroll-section.sticky-bg {
    background-attachment: fixed;
  }

  @media (prefers-reduced-motion: reduce) {
    .scroll-section.sticky-bg {
      background-attachment: scroll;
    }
  }

  .section-content {
    position: relative;
    z-index: 10;
    width: 100%;
    max-width: 1200px;
    padding: 4rem 2rem;
    text-align: center;
  }

  /* Overlay for better text readability on images */
  .scroll-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 1;
  }

  .scroll-section:first-child::before {
    background: rgba(0, 0, 0, 0.2);
  }
</style>
